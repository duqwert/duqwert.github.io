<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Linux常用命令—基础篇]]></title>
    <url>%2F2018%2F04%2F10%2FLinux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E2%80%94%E5%9F%BA%E7%A1%80%E7%AF%87%2F</url>
    <content type="text"><![CDATA[Linux常用命令—基础篇 工作了几年，经常会使用到一些Linux命令，时间长了也会忘。简单整理了一下，也能加深记忆。以下均为个人平时使用到的一些基本命令，如有纰漏，欢迎随时指正。 后面打算把Linux服务器性能监控的一些常用命令整理分享，欢迎大家关注。 1.文件相关命令1234567891011121314151617181920212223242526272829303132333435363738394041#显示隐藏文件ls -la#易读方式显示文件大小ls -lh#按最后修改时间显示ls -lt#建立软链接ln -s /folder /folder_via_soft_link#重命名文件，搜索带2015的文件，重命名为2017rename 2015 2017 *2015*#比较两个文件diff -w file1.txt file2.txt#一次查看多个文件内容，先file1，再file2cat file1 file2#-n 加上行号cat -n file#删除文件前先确认，-i，确认rm -i filename#拷贝文件1到文件2，保持文件的权限、属组、时间戳cp -p file1 file2#删除非空文件夹rm -rf *2014*#删除文件后空间不释放,lsof(list open files)lsof | grep delete#删除软链接rm -rf /target#创建目录mkdir -p /dir1/dir2/dir3 2.du命令123456#查询文件夹大小AIX：du -sg dirnameLinux: du -sh dirname#按照文件大小，从大到小排序,按照大小排序的话不要加h参数du -s *|sort -nr|head 3.压缩(tar/gzip)1234567891011121314#压缩test文件夹tar cvf test.tar test/#查看tar包内容tar tvf test.tar#gzip压缩成gz文件gzip filename#解压gzgzip -d file.gz#显示压缩ratiogzip -l file.gz 4.搜索(find/grep)1234567891011121314151617181920212223#不区分大小写find ./ -iname *keywords*#找到文件，执行命令find ./ -iname *keywords* -exec md5sum &#123;&#125; ;#删除创建时间大于30天的文件find ./ -name *keywords* -type f -ctime +30 -exec rm -fr &#123;&#125; ;#使用xargs解决文件列表过长find /dirname/ -name "*201410*" |xargs -n 100 rm &#123;&#125; ;#查询大文件，单位Kbfind ./ -size +500 -exec ls -lh &#123;&#125; ;#文本中查找,不区分大小写grep -i "keywords" filename#在文件夹中递归查找匹配关键字的grep -r "keywords" *#grep中实现or操作：寻找mysql与java进程，打印出pid与最后一列ps -ef|grep 'mysql\|java'|awk '&#123;print $2, $NF&#125;' 5.sed12345678910111213#sed = stream editor#-n 只打印匹配的行sed -n '2p' filename #第2行sed -n "1000,1200p" filename #1000~1200行#打印匹配字段的行sed -n '/kw1/p' filename#截取两个字符串之间的内容sed -n '/kw1/,/kw2/p' filename#example：编辑bin文件，将字段替换生成新文件cat XX_1030.bin | sed -e 's/20141030/20141031/g' &gt; xx_1031.bin 6.awk12345678910111213141516171819202122#格式化输出awk '&#123;print $1,$4&#125;' test.txt #显示文件1、4列#与ps命令结合ps -ef|grep java|awk '&#123;print $1,$2&#125;'#打印出最后一列，使用用$NFps -ef|grep 'mysql\|java'|awk '&#123;print $2, $NF&#125;'#kill掉java进程kill -9 `ps -ef|grep java |awk '&#123;print $2&#125;'`#正则匹配：输出第二列包含you的行，并打印第一列，第二列;~模式开始，//内是模式awk '$2 ~ /you/ &#123;print $1,$2&#125;' test.txt#计算文件大小ls -l *.txt |awk '&#123;sum+=$5&#125; END &#123;print sum&#125;'df -m|awk '&#123;sum+=$2&#125; END &#123;print sum&#125;'#参数-F 按照后面字段进行分割cat /etc/passwd |awk -F ':' '&#123;print $1&#125;'cat /etc/passwd |awk -F ':' '&#123;print $1" "$6&#125;' 7.vim vim 编辑器命令实在太丰富，这里简单列举几个 12345678#打开文件跳到第一个匹配的行vim +/search_pattern filename#只读模式打开vim -R filename#替换所有匹配文本,命令模式%s/old/new/g 8.网络配置与抓包1234567891011121314151617181920212223242526272829303132333435363738394041#查看所有的网络接口和状态ifconfig -a#使用up、down启动或者停止某个接口ifconfig eth1 down#查看网络配置ifconfig |egrep "HWaddr|inet addr"#查看路由表route#向DNS服务器查询域名，默认为UDP，可通过输入set vc改为TCP形式（性能影响较大）nslookup#ping,发送5个数据包ping -c 5 ip#查询端口状态netstat -an|grep 3306#域名解析配置文件：/etc/resolv.conf加入dns服务器nameserver 192.168.2.206#查看带宽,root用户ethtool eth1 Settings for eth1: Speed: 10000Mb/s #每1s刷新监控eth1网卡上的流量情况watch -n 1 "ifconfig eth1|grep bytes"#tcpdump抓包，文件可用wireshark分析#-i 网卡；-s size#解决：Package size limited during capture，加参数 -s0 可以抓取任意长度的数据包tcpdump host 192.168.2.206 -s0 -w /tmp/net.pcap #抓取所有与hostip之间的网络包，保存为文件#下载文件到本地wget --ftp-user=administrator --ftp-password=000000 ftp://192.168.2.206/source/app.out 9.查看操作系统版本/CPU/内存1234567891011121314151617181920#Linxu查看版本、系统信息uname -acat /proc/versionlsb_release -a#suse版本查询more /etc/SuSE-release#AIX查询配置prtconf#cpu查询cat /proc/cpuinfo#查看虚拟CPU分配(AIX)lparstat -i#内存,用MB显示结果free -mcat /proc/meminfo 10.账户与权限12345678910111213141516171819202122232425262728293031323334353637383940414243#更改密码passwd#root更换其他用户密码，或者创建新用户passwd username#Linux解锁用户，AIX使用smitty即可faillog -u username -r#Linux新建用户groupadd -g gid groupname #建立用户组，gid，组名useradd -d /homedir -g gid -u uid -p #建立用户 home 组 uid 输入密码#ssh登陆ssh -l username hostname#用指定用户执行命令，执行完返回原账户su - user -c 'ls'#查询历史命令history n#查看当前的环境变量export#查看和java有关的环境变量,-i一般都是ignore忽略大小写的意思export |grep -i JAVA#查看特定用户的进程top -u mysql#修改权限，—R递归修改子目录chown -R mysql /mysqlchgrp -R mysql /mysqlor：chown -R mysql:mysql *#用户profile相关设置当前用户的 .profiles 文件， 进然后 cat ~/.profile 入到 etc 目录，其实就是进入当前目录的home目录，然后ls -a 就有.profile 文件#修改用户homeStep1:修改对应的/etc/passwdStep2:usermod -d /userhome username 11.关机与重启1234567891011#关闭系统立即关机shutdown -h now#10分钟后关机shutdown -h +10#重启shutdown -r now#重启期间强制进行系统检查shutdown -Fr now 12.rpm安装12345678910111213#安装rpm -ivh xxx.rpm#更新rpm -uvh xxx.rpm#卸载rmp -ev httpd#编译安装./configure #检查依赖，配置编译项make #编译make install #安装 13.service1234567891011121314151617181920#查看服务状态service ssh status#查看所有服务状态,root权限service --status-all#启动telnet服务service xinetd restart#启动ftp服务service vsftpd start#nfs启动（linux）rcnfsserver statusrcnfsserver startservice nfs start#linux设置共享目录编辑/etc/exportsshowmount -e 192.168.2.206 #检查server共享目录 14.man 最重要的一个命令,要学会看官方手册 1234567891011121314#whatiswhatis shutdownshutdown (3p) - shut down socket send and receive operationsshutdown (8) - bring the system downshutdown (2) - shut down part of a full-duplex connection#指定特定版本的manualman 3p shutdown#查看某个命令的位置whereis ls#查看某个命令的描述whatis ls 15.JAVA环境变量配置12345678910#修改 /etc/profile,全局生效#修改用户$HOME/.profile 对当前用户生效JAVA_BIN=/usr/jdk/jdk1.6.0_16/binexport JAVA_BINJAVA_HOME=/usr/jdk/jdk1.6.0_16export JAVA_HOMEPATH=$JAVA_HOME/bin:$PATHexport PATH. /etc/profile 生效 16.其它命令1234#查看指定用户的crontabcrontab -u root -lLinux:5,10,15,20,25,30,35,40,45,50,55,0 * * * * /usr/sbin/sntp -P no -r 192.168.2.206AIX:0,5,10,15,20,25,30,35,40,45,50,55 * * * * /usr/sbin/ntpdate 192.168.2.206 完…]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[first blog]]></title>
    <url>%2F2018%2F04%2F06%2Ffirst-blog%2F</url>
    <content type="text"><![CDATA[用了一晚上，终于把hexo blog搭建起来了。准备开始坚持写博客~]]></content>
      <categories>
        <category>随笔</category>
      </categories>
      <tags>
        <tag>test</tag>
      </tags>
  </entry>
</search>
